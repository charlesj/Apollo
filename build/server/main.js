!function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=6)}([function(e,r){e.exports=require("@babel/runtime/regenerator")},function(e,r){e.exports=require("winston")},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,r){e.exports=require("serialize-error")},function(e,r){e.exports=require("cors")},function(e,r,n){e.exports=n(8)},function(e,r){e.exports=require("dotenv")},function(e,r,n){"use strict";n.r(r);var t=n(1),o=n.n(t),u=n(4),s=n.n(u);var a=!1;function i(e,r,n){var t,u=(t=n)instanceof Array?t.reduce(function(e,r,n){return e[n]=s()(r),e},{}):s()(t);a&&o.a.log(e,r,u)}var c={info:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return i("info",e,n)},error:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return i("error",e,n)},warn:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return i("warn",e,n)},debug:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return i("debug",e,n)},success:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return i("success",e,n)}},f=n(0),p=n.n(f),l=n(3),d=n.n(l),v=n(2),g=n.n(v),m=n(5),h=n.n(m),b=function(){return{db:{pgHOST:process.env.POSTGRES_HOST||"postgres",dbName:process.env.DB_NAME||"apollo"},server:{port:process.env.PORT||8042}}},y={BadRequestName:"BadRequest",NotFoundName:"NotFound",NotFoundMessage:"Resource not found",ServerErrorMessage:"The server encountered an error processing the request",ServerErrorName:"InternalServerError",UnauthorizedMessage:"The user is not authorized to do this",UnauthorizedName:"Unauthorized"};var x,w,j,N,O=(x=function(e,r){!function(e,r){e.status(200).json(r)}(r,{version:"1.0.0"})},w=d()(p.a.mark(function e(r,n,t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(r,n,t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),c.error("API Error",{method:r.method,path:r.path,message:e.t0.message,error:e.t0}),n.status(500).json({message:e.t0.message}).end();case 9:case"end":return e.stop()}},e,null,[[0,5]])})),function(e,r,n){return w.apply(this,arguments)});function S(e,r,n){r.set("X-Clacks-Overhead","GNU Terry Pratchet"),n()}function q(e,r,n){c.info("".concat(e.method," ").concat(e.originalUrl)),n()}function P(e,r,n){r.removeHeader("X-Powered-By"),n()}function R(e,r,n){c.error("Error in request",r,e),n.status(500).json({error:!0})}function T(e,r){!function(e){e.status(404).json({message:y.NotFoundMessage,name:y.NotFoundName})}(r)}function M(){return(M=d()(p.a.mark(function e(){var r,n,t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=b(),(n=g()()).use(g.a.json()),n.use(h()()),n.use(q),n.use(P),n.use(S),n.use("/",(o=void 0,(o=g.a.Router()).get("/appInfo",O),o)),n.use(T),n.use(R),c.info("server configuration complete"),t=n.listen(r.server.port,function(){return c.info("Listening on ".concat(r.server.port))}),e.abrupt("return",t);case 13:case"end":return e.stop()}var o},e)}))).apply(this,arguments)}n(7).config(),j=t.format.combine,N=t.format.simple,o.a.configure({transports:[new o.a.transports.Console({level:"debug",colorize:!0,format:j(N())})]}),a=!0,process.on("unhandledRejection",function(e){return c.error("app unhandled promise rejection",e)}),function(){return M.apply(this,arguments)}().then(function(){c.info("startup complete")}).catch(function(e){c.error("ERROR starting up",e),process.exit(1)})}]);